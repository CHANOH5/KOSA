<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/footer.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="../js/header.js"></script>
    
    <script>
        $(() => {
            console.log(location.search); // ?prodno=C0001
            const queryStr = location.search.substr(1) // prodno=C0001
            $.ajax({
                url : "http://localhost:8888/back/productjson",
                method : 'get',
                data : queryStr,
                success : (responseJSONObj) => {
                    if(responseJSONObj.msg != undefined) { // 상품검색 실패인 경우
                        alert(responseJSONObj.msg)
                    } else { //상품검색이 성공인 경우
                        $('div.product>img').attr('src', `../images/${responseJSONObj.prodNo}.jpg`)
                        $('div.product>div>ul>li>span.prodname').html(responseJSONObj.prodName)
                        $('div.product>div>ul>li>span.prodno').html(responseJSONObj.prodNo)
                        $('div.product>div>ul>li>span.prodprice').html(responseJSONObj.prodPrice)
                    }

                    // const prodName = responseJSONObj.prodName
                    // const prodNo = responseJSONObj.prodNo
                    // const prodPrice = responseJSONObj.prodPrice

                    // const $divProduct = $('div.product')
                    // $divProduct.find("div.product>img").attr('src', '../images/' + prodNo + '.jpg')
                    // $divProduct.find("div.product>div>ul>li>span").html(prodname).attr('')
                },
                error: (jqxhr) => {
                    console.log(jqxhr.state())
                    console.log(jqxhr.status)
                }            
            })
        })
    </script>
</head>
<body>
    <header>
        <img src="../images/logo.png" alt="로고">
    </header>
    <nav id="nav"> <!-- 메뉴들 -->
        <ul id="nav_ul">
            <li><a href="#" class="login">로그인</a></li>
            <li><a href="#" class="signup">가입</a></li>
            <li><a href="#" class="logout">로그아웃</a></li>
            <li><a href="#" class="productlist">상품목록</a></li>
            <li><a href="#" class="cartlist">장바구니목록</a></li>
            <li><a href="#" class="orderlist">주문목록</a></li>
        </ul>
    </nav>
    <section>
        <div class="product">
            <img src="../images/images.jpg" alt="">
            <div class="">
                <ul>
                    <li>상품이름:<span class="prodname">  </span></li>
                    <li>상품번호:<span class="prodno">  </span></li>
                    <li>상품가격:<span class="prodprice">  </span></li>
                    <li>수량:<input type="number" class="quantity" value="1" max="10" min="1"></li>
                    <li><button>장바구니 넣기</button></li>
                </ul>
            </div>
        </div>
    </section>
    <footer id="footer"> <!-- 맺음말 -->
        사업자등록번호 : 201-81-21515 주식회사 에스씨케이컴퍼니 대표이사 : 손정현 TEL : 1522-3232 개인정보 책임자 : 이찬우
        ⓒ 2023 Starbucks Coffee Company. All Rights Reserved.
    </footer>
</body>
</html>