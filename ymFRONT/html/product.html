<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script>
        $(() => {
            console.log(location.search); // ?prodno=C0001
            const queryStr = location.search.substr(1) // prodno=C0001
            $.ajax({
                url : "http://localhost:8888/back/productjson",
                method : 'get',
                data : queryStr,
                success : (responseJSONObj) => {
                    if(responseJSONObj.msg != undefined) { // 상품검색 실패인 경우
                        alert(responseJSONObj.msg)
                    } else { //상품검색이 성공인 경우
                        $('div.product>img').attr('src', `../images/${responseJSONObj.prodNo}.jpg`)
                        $('div.product>div>ul>li>span.prodname').html(responseJSONObj.prodName)
                        $('div.product>div>ul>li>span.prodno').html(responseJSONObj.prodNo)
                        $('div.product>div>ul>li>span.prodprice').html(responseJSONObj.prodPrice)
                    }

                    // const prodName = responseJSONObj.prodName
                    // const prodNo = responseJSONObj.prodNo
                    // const prodPrice = responseJSONObj.prodPrice

                    // const $divProduct = $('div.product')
                    // $divProduct.find("div.product>img").attr('src', '../images/' + prodNo + '.jpg')
                    // $divProduct.find("div.product>div>ul>li>span").html(prodname).attr('')
                },
                error: (jqxhr) => {
                    console.log(jqxhr.state())
                    console.log(jqxhr.status)
                }            
            })
        })
    </script>

</head>
<body>
    <div class="product">
        <img src="../images/images.jpg" alt="">
        <div class="">
            <ul>
                <li>상품이름:<span class="prodname">  </span></li>
                <li>상품번호:<span class="prodno">  </span></li>
                <li>상품가격:<span class="prodprice">  </span></li>
                <li>수량:<input type="number" class="quantity" value="1" max="10" min="1"></li>
                <li><button>장바구니 넣기</button></li>
            </ul>
        </div>

    </div>
</body>
</html>